/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var m=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var S=(l,e)=>{for(var t in e)m(l,t,{get:e[t],enumerable:!0})},L=(l,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of v(e))!k.call(l,i)&&i!==t&&m(l,i,{get:()=>e[i],enumerable:!(n=F(e,i))||n.enumerable});return l};var x=l=>L(m({},"__esModule",{value:!0}),l);var C={};S(C,{default:()=>b});module.exports=x(C);var w=require("obsidian");var p=require("obsidian"),f=class extends p.Plugin{processTabulation(e,t,n){let[i,r,o]=this.getRelevantFileInformation();if(o==="")return;let u=this.app.vault.getFolderByPath(r);if(u){let s=u.children.filter(a=>a instanceof p.TFile);if(!s.every(a=>a instanceof p.TFile))return;if(s.length){let a=this.getNextFile(s,i,e);if(a===null)return;let g=[...t.keys()].filter(d=>{var T;return((T=d.view.file)==null?void 0:T.path)==a.path})[0];g?this.app.workspace.setActiveLeaf(g):this.openFile(a,n)}}}getRelevantFileInformation(){let e=this.app.workspace.getActiveFile();if(e===null)return["","",""];let t=e.name,n=e.parent?(0,p.normalizePath)(e.parent.path):null;return n===null?["","",""]:[t,n,(0,p.normalizePath)(`${n}${t}`)]}getNextFile(e,t,n){let i=e.map(a=>a.path),r=i.findIndex(a=>a.includes(t)),o=n?(r+1)%i.length:(r-1)%i.length;o<0&&(o=i.length-1);let u=(0,p.normalizePath)(i[o]),s=this.app.vault.getAbstractFileByPath(u);return s===null||!(s instanceof p.TFile)?null:s}openFile(e,t){if(t.newTab==="same")this.app.workspace.openLinkText(e.basename,e.path);else if(t.newTab==="tab")this.app.workspace.openLinkText(e.basename,e.path,"tab");else if(t.newTab==="window")this.app.workspace.openLinkText(e.basename,e.path,"window");else if(t.newTab==="pane")this.app.workspace.openLinkText(e.basename,e.path,"split");else return}getButtons(e,t){var n,i,r;if(t.has(e)){let o;if(((n=t.get(e))==null?void 0:n.buttons.get("button-next"))!==void 0&&((i=t.get(e))==null?void 0:i.buttons.get("button-prev"))!==void 0)return o=(r=t.get(e))==null?void 0:r.buttons,o||new Map}return new Map}setButtonDisplay(e,t,n,i){i.hideButtons||e===""?(t.removeClass("button-visible"),t.addClass("button-hidden"),n.removeClass("button-visible"),n.addClass("button-hidden")):(t.addClass("button-visible"),t.removeClass("button-hidden"),n.addClass("button-visible"),n.removeClass("button-hidden"))}setSettings(e,t){let n=this.app.workspace.getLeaf(!1),i=this.getButtons(n,t),[r,o,u]=this.getRelevantFileInformation();if(i){let s=i.get("button-next"),a=i.get("button-prev");s!==void 0&&a!==void 0&&this.setButtonDisplay(r,s,a,e)}}};var c=require("obsidian"),h=class extends c.PluginSettingTab{constructor(t,n){super(t,n);this.plugin=n}display(){let{containerEl:t}=this;t.empty(),new c.Setting(t).setName("Set the behavior for opening of files").setDesc("Supported options are: in the same tab, in a new tab, in a new window (popup), in a new pane (split)").addDropdown(n=>{n.addOptions({same:"Same tab",tab:"New tab",window:"New window / popup",pane:"New pane / split"}).setValue(this.plugin.settings.newTab).onChange(i=>{this.plugin.settings.newTab=i,this.plugin.saveSettings()})}),new c.Setting(t).setName("Hide the buttons from the UI").addToggle(n=>{n.setValue(this.plugin.settings.hideButtons).onChange(i=>{this.plugin.settings.hideButtons=i,this.plugin.saveSettings()})})}};var y={newTab:"same",hideButtons:!1},b=class extends f{constructor(){super(...arguments);this.openViews=new Map}async onload(){await this.loadSettings(),this.addCommand({id:"move-to-next-file-in-folder",name:"Move to next file in folder",callback:()=>{this.processTabulation(!0,this.openViews,this.settings)}}),this.addCommand({id:"move-to-prev-file-in-folder",name:"Move to previous file in folder",callback:()=>{this.processTabulation(!1,this.openViews,this.settings)}}),this.addSettingTab(new h(this.app,this)),this.registerEvent(this.app.workspace.on("active-leaf-change",()=>{if(!this.app.workspace.getActiveViewOfType(w.FileView))return;let n=this.app.workspace.getLeaf(!1);if(!(n.view instanceof w.FileView))return;let[i,r,o]=this.getRelevantFileInformation();if(!this.openViews.has(n)){let s=n.view.addAction("arrow-right-to-line","Tab to next file",()=>{this.app.commands.executeCommandById("folder-tabulation:move-to-next-file-in-folder")});s.addClasses(["folder-tabular-button","button-visible","next"]);let a=n.view.addAction("arrow-left-to-line","Tab to previous file",()=>{this.app.commands.executeCommandById("folder-tabulation:move-to-prev-file-in-folder")});a.addClasses(["folder-tabular-button","button-visible","prev"]),this.openViews.set(n,{path:o,buttons:new Map([["button-next",s],["button-prev",a]])});let g=[...this.openViews.keys()].filter(d=>d.getViewState().type==="empty");for(let d of g)this.openViews.delete(d)}let u=this.getButtons(n,this.openViews);if(u){let s=u.get("button-next"),a=u.get("button-prev");s!==void 0&&a!==void 0&&this.setButtonDisplay(i,s,a,this.settings)}}))}onunload(){}async loadSettings(){this.settings=Object.assign({},y,await this.loadData())}async saveSettings(){await this.saveData(this.settings),this.setSettings(this.settings,this.openViews)}};

/* nosourcemap */